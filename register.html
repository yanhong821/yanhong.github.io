<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>注册</title>
		<link rel="stylesheet" type="text/css" href="css/public.css"/>
		<link rel="stylesheet" type="text/css" href="css/register.css"/>
		<!--<link rel="stylesheet" type="text/css" href="css/bootstrap.css"/>-->
	</head>
	<body>
		<div class="top">
		</div>
		<div class="container">
			<div class="logo">
				<img src="img/site-logo.png" />
				<span class="wel">欢迎注册</span>
				<span class="to-login">已经注册，请<a href="#">登录</a></span>
			</div>
			<div class="content">
				<div class="reg-title">
					<h2>个人用户注册</h2>
				</div>
				<div class="reg-content">
					<form action="" class="form-signin" id="register" role="form" method="">
						<div class="cBox">
							<input type="text" id="user_name" class="form-control required number mobile error text tip input-40" name="phone" placeholder="手机号" title="请输入11位手机号"/>
							<i></i>
							<label for="user_name">手机号不能为空</label>
							<div class="tip-yellow .tip-show">
								请输入11位手机号
								<!--<i></i>-->
							</div>
						</div>
						<!--<input placeholder="手机号码" type="text" id="user_name" name="user_name" class="text tip input-40 error" title="请输入11位手机号">-->
						<div class="cBox">
							<input type="password" id="password" class="form-control required checkPsw error text tip input-40" name="password" placeholder="设置密码" title="6-20位字符，可由英文、数字及标点符号组成"/>
							<i></i>
							<label class="error" for="password">密码不能为空</label>
							<div class="tip-yellow">
								6-20位字符，可由英文、数字及标点符号组成
								<!--<i></i>-->
							</div>
						</div>
						<!--<input placeholder="设置密码" type="password" id="password" name="password" class="text tip input-40 error" title="6-20位字符，可由英文、数字及标点符号组成">-->
						<div class="short">
							<input type="text" id="captcha" class="orm-control required text w148 fl tip error" placeholder="验证码" /> 
							<i></i>
							<span class="verify f1 mt8"></span>
							<a href="javascript:;" class="exchange">看不清，换一张</a>
							<label class="error" for="captcha">验证码不能为空</label>
							<div class="tip-yellow">
								请输入验证码
								<!--<i></i>-->
							</div>
						</div>
						<!--<input type="text" placeholder="验证码" name="captcha" class="text w148 fl tip error" id="captcha" maxlength="4" size="10" title="请输入验证码">-->
						<div class="short">
							<input type="text" id="seccode" class="note-code text tip cap w148 error" maxlength="6" placeholder="短信验证码" /> 
							<i></i>
							<input type="button" class="reget" id="reget" value="获取短信验证码">
							<label for="seccode" class="error">请输入验证码</label>
							<div class="tip-yellow">
								请输入短信验证码
								<!--<i></i>-->
							</div>
						</div>
						<!-- <input placeholder="短信验证码" type="text" id="seccode" maxlength="6" name="seccode" class="text tip cap w148 error" title="请输入短信验证码"> -->
						<div class="cBox">
		                    <input placeholder="好友推荐码(非必填)" type="text" id="tuijianma" name="tuijianma" class="text tip input-40" title="请输入好友推荐码">
		                </div>
						<input name="agree" type="checkbox" class="vm ml5" id="clause" value="1" checked="checked">
	                    <span for="clause" class="ml5">阅读并同意<a href="#">服务协议 </a></span>
	                    <div type="button" id="Submit" class="submit"></div>
	                    <label for="clause" class="error">请阅读并同意该协议</label>
					</form>
					
				</div>
			</div>
		</div>
		<script type="text/javascript" src="js/jquery.1.11.3.min.js" ></script>
		<!--表单自动验证-->
		<script type="text/javascript" src="js/jquery.validate.js" ></script>
		<!--修改提示信息-->
		<script type="text/javascript" src="js/validate_tip.js" ></script>
		<script>
			$('#register').validate();
			//生成验证码
			$(function(){
				var exchange = $('.exchange');
				var verify = $('.verify');
				createVerifyMix();
				var v = createVerifyMix();
				verify.html(v);
				function createVerifyMix(){
					var str = '';
					for(var i=0; i<26; i++){
						str += String.fromCharCode(97+i);
					}
					var strUpper = str.toUpperCase();
					var verify = str + strUpper + '0123456789';
					var v = '';
					for(var i=0; i<4; i++){
						var index = parseInt( Math.random()*62 );
						v += verify[index];
					}
						return v;
				}
				exchange.click(function(){
					v = createVerifyMix();
					verify.html(v);
				});
			//验证
			var inputs = $('input');
			var uname = $('#user_name');
			var pasw = $('#password');
			var verifycode = $('#captcha');
			var note = $('#seccode');
			var agree = $('#clause');
			var regist = $('.submit');
			var tip = $('.tip-yellow');
			var i = $('i');
			var label = $('label');
			var unameReg = /^1[3|4|5|7|8]\d{9}$/;
			var paswReg = /^\w{6,20}$/;
			//input获焦
			inputs.focus(function(){
				$(this).parent().find('.tip-yellow').show();
				var left = $(this).width()/2 - ($(this).parent().find('.tip-yellow').width())/2;
				$(this).parent().find('.tip-yellow').css({
					left:left + 'px'
				});
			});
			//input失焦
			inputs.blur(function(){
				$(this).parent().find('.tip-yellow').hide();
			});
			//手机号失焦验证
				$('input[id="user_name"]').blur(function(){
					var unameV = uname.val().trim();
					if(unameV.length == 0){
						i.eq(0).addClass('error');
						label.eq(0).show();
					}
					if(unameReg.test(unameV)){
						i.eq(0).removeClass('error');
						label.eq(0).hide();
						i.eq(0).addClass('correct');
					}else{
						i.eq(0).addClass('error');
					}
				});
			//密码失焦验证
				$('input[id="password"]').blur(function(){
					var paswV = pasw.val().trim();
					if(paswV.length == 0){
						i.eq(1).addClass('error');
						label.eq(1).show();
					}
					if(paswReg.test(paswV)){
						i.eq(1).removeClass('error');
						label.eq(1).hide();
						i.eq(1).addClass('correct');
					}else{
						i.eq(1).addClass('error');
					}
				});	
			//验证码失焦验证
			    $('input[id="captcha"]').blur(function(){
					var codeV = verifycode.val().trim();
					if(codeV.length == 0){
						i.eq(2).addClass('error-short');
						label.eq(2).show();
					}
					if(codeV == v){
						i.eq(2).removeClass('error-short');
						i.eq(2).addClass('correct-short');
					}else{
						i.eq(2).addClass('error-short');
					}
				});	
			//短信验证码失焦验证
			    $('input[id="seccode"]').blur(function(){
					var noteV = note.val().trim();
					if(noteV.length == 0){
						i.eq(3).addClass('error-short');
						label.eq(3).show();
					}
				});	
			//注册按钮点击
			regist.click(function(){
				var unameV = uname.val().trim();
				var paswV = pasw.val().trim();
				var codeV = verifycode.val().trim();
				var noteV = note.val().trim();
				if(unameV.length == 0){
					i.eq(0).addClass('error');
					label.eq(0).show();	
				}
				if(paswV.length == 0){
					i.eq(1).addClass('error');
					label.eq(1).show();
				}
				if(codeV.length == 0){
					i.eq(2).addClass('error-short');
					label.eq(2).show();
				}
				if(noteV.length == 0){
					i.eq(3).addClass('error-short');
					label.eq(3).show();
				}
				
			});
			
		});
			
		</script>
	</body>
</html>